<Page x:Class="SapphireTool.Pages.BrowsersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:SapphireTool.Pages"
      xmlns:iconPack="http://metro.mahapps.com/winfx/xaml/iconpacks"
      xmlns:converters="clr-namespace:SapphireTool.Converters"
      mc:Ignorable="d" xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      d:DesignHeight="600" d:DesignWidth="800"
      Title="BrowsersPage">
    <Page.Resources>
        <converters:ColumnWidthConverter x:Key="ColumnWidthConverter"/>
    </Page.Resources>
    <Grid MaxHeight="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType={x:Type Page}}}" Background="#1C1A26">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Orientation="Vertical" Margin="10">
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left">
                    <ui:Button Name="DownloadButton" Content="Download" Margin="5" Click="DownloadButton_Click" />
                    <ui:Button Content="Cancel" Margin="5" Click="CancelButton_Click" />
                </StackPanel>
                <ProgressBar Name="ProgressBar" Height="20" VerticalAlignment="Center" Margin="177,0,5,0" />
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <ui:TextBlock Text="Speed:" Foreground="#FFFFFFFF" Margin="5,10" />
                    <ui:TextBlock Name="SpeedLabel" Text="0 KB/s" Foreground="#FFFFFFFF" Margin="5,10" />
                    <ui:TextBlock Text="Downloaded:" Foreground="#FFFFFFFF" Margin="5,10" />
                    <ui:TextBlock Name="DownloadedLabel" Text="0 MB" Foreground="#FFFFFFFF" Margin="5,10" />
                </StackPanel>
            </Grid>
            <ui:TextBox Name="SearchBox" Height="40" FontSize="16" VerticalContentAlignment="Center" PlaceholderText="Search applications..." TextChanged="SearchBox_TextChanged" />
        </StackPanel>
        <ui:ListView Name="AppList" 
                   Grid.Row="1" Margin="10,3,10,10" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.HorizontalScrollBarVisibility="Disabled" SelectionMode="Single" ItemsSource="{Binding Applications}">
            <ListView.View>
                <GridView>
                    <GridView.ColumnHeaderContainerStyle>
                        <Style TargetType="{x:Type GridViewColumnHeader}">
                            <Setter Property="Background" Value="#00FFFFFF" />
                            <Setter Property="Foreground" Value="#00FFFFFF" />
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="Height" Value="0" />
                        </Style>
                    </GridView.ColumnHeaderContainerStyle>
                    <GridViewColumn Width="75">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox VerticalAlignment="Center" HorizontalAlignment="Center" IsChecked="{Binding IsSelected, Mode=TwoWay}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Width="{Binding Title, Converter={StaticResource ColumnWidthConverter}}" 
                                  DisplayMemberBinding="{Binding Title}" />
                    <GridViewColumn Width="{Binding Version, Converter={StaticResource ColumnWidthConverter}}" 
                                  DisplayMemberBinding="{Binding Version}" />
                    <GridViewColumn Width="{Binding Type, Converter={StaticResource ColumnWidthConverter}}" 
                                  DisplayMemberBinding="{Binding Type}" />
                    <GridViewColumn Width="{Binding Size, Converter={StaticResource ColumnWidthConverter}}" 
                                  DisplayMemberBinding="{Binding Size}" />
                </GridView>
            </ListView.View>
        </ui:ListView>
    </Grid>
</Page>